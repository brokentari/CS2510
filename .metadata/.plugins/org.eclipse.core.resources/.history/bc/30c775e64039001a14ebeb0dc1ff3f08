import tester.Tester;

interface ICircuit {
  int countComponents();
  double totalVoltage();
  double totalCurrent();
  double totalResistance();
}

class Battery implements ICircuit {
  String name;
  double voltage;
  double nominalResistance;
  
  Battery (String name, double voltage, double nominalResistance) {
    this.name = name;
    this.voltage = voltage;
    this.nominalResistance = nominalResistance;
  }

  @Override
  public int countComponents() {
    // TODO Auto-generated method stub
    return 1;
  }

  @Override
  public double totalVoltage() {
    // TODO Auto-generated method stub
    return this.voltage;
  }

  @Override
  public double totalCurrent() {
    // TODO Auto-generated method stub
    return this.voltage / this.nominalResistance;
  }

  @Override
  public double totalResistance() {
    // TODO Auto-generated method stub
    return this.nominalResistance;
  }
}

class Resistor implements ICircuit {
  String name;
  double resistance;
  
  Resistor (String name, double resistance) {
    this.name = name;
    this.resistance = resistance;
  }

  @Override
  public int countComponents() {
    // TODO Auto-generated method stub
    return 1;
  }

  @Override
  public double totalVoltage() {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public double totalCurrent() {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public double totalResistance() {
    // TODO Auto-generated method stub
    return this.resistance;
  }
}

class Series implements ICircuit {
  ICircuit first;
  ICircuit second;
  
  Series (ICircuit first, ICircuit second) {
    this.first = first;
    this.second = second;
  }

  @Override
  public int countComponents() {
    // TODO Auto-generated method stub
    return this.first.countComponents() + this.second.countComponents();
  }

  @Override
  public double totalVoltage() {
    // TODO Auto-generated method stub
    return this.first.totalVoltage() + this.second.totalVoltage();
  }

  @Override
  public double totalCurrent() {
    // TODO Auto-generated method stub
    return this.totalVoltage() / this.totalResistance();
  }

  @Override
  public double totalResistance() {
    // TODO Auto-generated method stub
    return this.first.totalResistance() + this.second.totalResistance();
  }
}

class Parallel implements ICircuit {
  ICircuit first;
  ICircuit second;
  
  Parallel (ICircuit first, ICircuit second) {
    this.first = first;
    this.second = second;
  }

  @Override
  public int countComponents() {
    // TODO Auto-generated method stub
    return this.first.countComponents() + this.second.countComponents();
  }

  @Override
  public double totalVoltage() {
    // TODO Auto-generated method stub
    return this.first.totalVoltage();
  }

  @Override
  public double totalCurrent() {
    // TODO Auto-generated method stub
    return this.totalVoltage() / this.totalResistance();
  }

  @Override
  public double totalResistance() {
    // TODO Auto-generated method stub
    return 1 / ((1 / this.first.totalResistance()) + (1/this.second.totalResistance()));
  }
}

class ExamplesCircuits {
  // Batteries
  ICircuit batteryOne = new Battery("B 1", 10, 25);
  ICircuit batteryTwo = new Battery("B 2", 20, 25);
  
  // Resistors
  ICircuit resistorOne = new Resistor("R 1", 100);
  ICircuit resistorTwo = new Resistor("R 2", 250);
  ICircuit resistorThree = new Resistor("R 3", 500);
  ICircuit resistorFour = new Resistor("R 4", 200);
  
  // Circuits
  ICircuit simpleSeries = new Series(batteryOne, resistorOne);
  ICircuit componentOne = new Series(new Series(resistorFour, batteryOne), batteryTwo);
  ICircuit complexSeries = new Parallel(componentOne,
      new Parallel(
          new Parallel(resistorThree, resistorTwo), 
          resistorOne));
  
  boolean testCount(Tester t) {
    return t.checkExpect(batteryOne.countComponents(), 1) &&
           t.checkExpect(componentOne.countComponents(), 3) &&
           t.checkExpect(complexSeries.countComponents(), 6);
  }
  
  boolean testVoltage(Tester t) {
    return t.checkExpect(batteryOne.totalVoltage(), 10.0) &&
           t.checkExpect(resistorOne.totalVoltage(), 0.0) &&
           t.checkExpect(componentOne.totalVoltage(), 30.0) &&
           t.checkExpect(complexSeries.totalVoltage(), 30.0);
  }
  
  boolean testResistance(Tester t) {
    return t.checkExpect(batteryOne.totalResistance(), 25.0) &&
           t.checkExpect(resistorThree.totalResistance(), 500.0) &&
           t.checkExpect(simpleSeries.totalResistance(), 125.0) &&
           t.checkExpect(complexSeries.totalResistance(), 50.0);
  }
  
  boolean testCurrent(Tester t) {
   return t.checkInexact(batteryOne.totalCurrent(), 0.4, 0.01) &&
          t.checkInexact(resistorOne.totalCurrent(), 0.0, 0.01) &&
          t.checkInexact(simpleSeries.totalCurrent(), 0.08, 0.01) &&
          t.checkInexact(complexSeries.totalCurrent(), 0.6, 0.01);
  }
}